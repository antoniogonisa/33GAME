<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>33 Razones para Amarte üíù</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #BFF8F1;
            --primary-dark: #9DE5DD;
            --accent: #FFB6C1;
            --text: #2C3E50;
            --light: #FFFFFF;
            --shadow: rgba(191, 248, 241, 0.3);
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #BFF8F1 0%, #E8F8F5 50%, #FFE5EC 100%);
            min-height: 100vh;
            color: var(--text);
            overflow-x: hidden;
        }

        .container {
            max-width: 420px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            padding: 30px 0 20px;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2em;
            color: var(--text);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255, 182, 193, 0.3);
        }

        .header .subtitle {
            font-size: 1em;
            color: #666;
            font-weight: 300;
        }

        .progress-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 8px 30px var(--shadow);
            animation: fadeIn 1s ease;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 0.95em;
        }

        .progress-bar {
            height: 12px;
            background: #E8F8F5;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 10px;
            transition: width 0.6s cubic-bezier(0.65, 0, 0.35, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .card {
            background: white;
            border-radius: 25px;
            padding: 35px 25px;
            box-shadow: 0 10px 40px var(--shadow);
            animation: slideUp 0.6s ease;
            margin-bottom: 20px;
        }

        .challenge-number {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--text);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .challenge-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.6em;
            margin-bottom: 15px;
            color: var(--text);
        }

        .challenge-description {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: linear-gradient(135deg, #F8FBFF 0%, var(--primary) 100%);
            border: 2px solid var(--primary-dark);
            padding: 18px;
            border-radius: 15px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
            color: var(--text);
            text-align: left;
        }

        .option-btn:hover {
            transform: translateX(8px);
            box-shadow: 0 5px 20px var(--shadow);
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #A8E6CF 0%, #77DD77 100%);
            border-color: #4CAF50;
            animation: correctPulse 0.5s ease;
        }

        .option-btn.incorrect {
            background: linear-gradient(135deg, #FFB6B6 0%, #FF8A8A 100%);
            border-color: #F44336;
            animation: shake 0.5s ease;
        }

        .input-field {
            width: 100%;
            padding: 18px;
            border: 2px solid var(--primary-dark);
            border-radius: 15px;
            font-size: 1em;
            font-family: 'Quicksand', sans-serif;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #F8FBFF 0%, #FFFFFF 100%);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(255, 182, 193, 0.2);
            transform: scale(1.02);
        }

        .submit-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            border: none;
            padding: 18px 35px;
            border-radius: 15px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            color: var(--text);
            width: 100%;
            margin-top: 15px;
            box-shadow: 0 5px 20px var(--shadow);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px var(--shadow);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        /* Mini-game specific styles */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .memory-card:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .memory-card.flipped {
            background: white;
            border-color: var(--accent);
        }

        .memory-card.matched {
            background: linear-gradient(135deg, #A8E6CF, #77DD77);
            border-color: #4CAF50;
            animation: matchPulse 0.5s ease;
        }

        .hearts-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .heart-item {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #FFE5EC, #FFB6C1);
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
        }

        .heart-item:nth-child(2) { animation-delay: 0.2s; }
        .heart-item:nth-child(3) { animation-delay: 0.4s; }
        .heart-item:nth-child(4) { animation-delay: 0.6s; }
        .heart-item:nth-child(5) { animation-delay: 0.8s; }
        .heart-item:nth-child(6) { animation-delay: 1s; }
        .heart-item:nth-child(7) { animation-delay: 1.2s; }
        .heart-item:nth-child(8) { animation-delay: 1.4s; }

        .heart-item:hover {
            transform: scale(1.15) rotate(5deg);
        }

        .heart-item.found {
            background: linear-gradient(135deg, #A8E6CF, #77DD77);
            animation: heartPop 0.5s ease;
        }

        .slider-container {
            margin: 30px 0;
        }

        .slider {
            width: 100%;
            height: 12px;
            border-radius: 10px;
            background: #E8F8F5;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            cursor: pointer;
            box-shadow: 0 3px 10px var(--shadow);
            transition: all 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-value {
            text-align: center;
            font-size: 2em;
            font-weight: 600;
            margin-top: 20px;
            color: var(--accent);
        }

        .puzzle-pieces {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin: 20px 0;
        }

        .puzzle-piece {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--primary), white);
            border: 2px solid var(--primary-dark);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .puzzle-piece:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px var(--shadow);
        }

        .puzzle-piece.correct-position {
            background: linear-gradient(135deg, #A8E6CF, #77DD77);
            border-color: #4CAF50;
        }

        .message-card {
            background: linear-gradient(135deg, #FFF8F0, #FFFBF5);
            border-left: 5px solid var(--accent);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            font-style: italic;
            line-height: 1.8;
            box-shadow: 0 5px 20px rgba(255, 182, 193, 0.2);
        }

        .final-screen {
            text-align: center;
            padding: 40px 20px;
        }

        .final-screen h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .final-message {
            font-size: 1.2em;
            line-height: 1.8;
            margin: 30px 0;
            color: #666;
        }

        .celebration {
            font-size: 4em;
            margin: 30px 0;
            animation: celebrate 1s ease infinite;
        }

        .timer {
            text-align: center;
            font-size: 1.2em;
            margin: 15px 0;
            font-weight: 600;
            color: var(--accent);
        }

        .reaction-time {
            background: linear-gradient(135deg, #FFF8F0, #FFE5EC);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            font-weight: 600;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes matchPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes heartPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.3) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-10deg); }
            75% { transform: scale(1.2) rotate(10deg); }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>33 Razones para Amarte üíù</h1>
            <p class="subtitle">Un viaje de amor y diversi√≥n</p>
        </div>

        <div class="progress-container">
            <div class="progress-info">
                <span>Nivel <span id="currentLevel">1</span> de 33</span>
                <span id="progressPercent">3%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 3%"></div>
            </div>
        </div>

        <div class="card" id="challengeCard">
            <!-- Challenge content will be inserted here -->
        </div>
    </div>

    <script>
        const challenges = [
            // 1-5: Preguntas b√°sicas
            {
                type: 'multiple',
                title: '¬øCu√°ndo fue nuestra primera cita?',
                description: 'Selecciona la fecha correcta',
                options: ['15 de marzo', '22 de abril', '10 de mayo', '3 de junio'],
                correct: 1
            },
            {
                type: 'input',
                title: 'Completa la frase',
                description: 'La primera pel√≠cula que vimos juntos fue...',
                answer: 'ejemplo'
            },
            {
                type: 'multiple',
                title: '¬øCu√°l es mi comida favorita?',
                description: 'T√∫ mejor que nadie lo sabes',
                options: ['Pizza', 'Sushi', 'Pasta', 'Hamburguesas'],
                correct: 0
            },
            {
                type: 'message',
                title: 'Un momento especial',
                message: 'Recuerdo cuando nos re√≠mos tanto que nos dol√≠a el est√≥mago. Ese d√≠a supe que contigo todo es mejor. ‚ù§Ô∏è'
            },
            {
                type: 'multiple',
                title: '¬øEn qu√© mes nos conocimos?',
                description: 'El comienzo de todo',
                options: ['Enero', 'Febrero', 'Marzo', 'Abril'],
                correct: 2
            },
            
            // 6: Mini-game - Memory
            {
                type: 'memory',
                title: '¬°Encuentra las parejas!',
                description: 'Encuentra todos los corazones iguales',
                pairs: ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíù', 'üíò', 'üíì', 'üíû']
            },
            
            // 7-10: M√°s preguntas
            {
                type: 'multiple',
                title: '¬øCu√°l es nuestro lugar favorito?',
                description: 'Donde hemos hecho tantos recuerdos',
                options: ['La playa', 'El parque', 'El caf√©', 'La monta√±a'],
                correct: 1
            },
            {
                type: 'input',
                title: 'Completa el apodo',
                description: 'Mi apodo cari√±oso para ti es...',
                answer: 'cari√±o'
            },
            {
                type: 'message',
                title: 'Raz√≥n #3',
                message: 'Me encanta c√≥mo tu risa ilumina cualquier lugar. Es imposible estar triste cuando sonr√≠es. üòä'
            },
            {
                type: 'multiple',
                title: '¬øQu√© canci√≥n es "nuestra canci√≥n"?',
                description: 'La que siempre nos recuerda a nosotros',
                options: ['Canci√≥n rom√°ntica 1', 'Canci√≥n rom√°ntica 2', 'Canci√≥n rom√°ntica 3', 'Canci√≥n rom√°ntica 4'],
                correct: 0
            },
            
            // 11: Mini-game - Find Hearts
            {
                type: 'find-hearts',
                title: '¬°Encuentra los 3 corazones rojos!',
                description: 'Toca r√°pido para encontrarlos todos',
                heartsToFind: 3
            },
            
            // 12-15: M√°s preguntas
            {
                type: 'multiple',
                title: '¬øQu√© me gusta hacer contigo los domingos?',
                description: 'Nuestro ritual de fin de semana',
                options: ['Cocinar juntos', 'Ver series', 'Ir al cine', 'Caminar'],
                correct: 1
            },
            {
                type: 'input',
                title: 'Nuestro n√∫mero',
                description: '¬øCu√°l es nuestro n√∫mero especial?',
                answer: '33'
            },
            {
                type: 'message',
                title: 'Te admiro',
                message: 'Tu fuerza y determinaci√≥n me inspiran cada d√≠a. Eres incre√≠ble en todo lo que haces. üí™'
            },
            {
                type: 'multiple',
                title: '¬øCu√°l fue el primer regalo que te di?',
                description: 'Aquel d√≠a tan especial',
                options: ['Flores', 'Libro', 'Peluche', 'Joya'],
                correct: 2
            },
            
            // 16: Mini-game - Slider Love
            {
                type: 'slider',
                title: '¬øCu√°nto te amo?',
                description: 'Ajusta el nivel de amor (pista: al m√°ximo)',
                target: 100
            },
            
            // 17-20: Preguntas variadas
            {
                type: 'multiple',
                title: '¬øQu√© te dije cuando te conoc√≠?',
                description: 'Mis primeras palabras para ti',
                options: ['Hola, ¬øc√≥mo est√°s?', 'Me encanta tu sonrisa', '¬øVienes aqu√≠ seguido?', 'Ten√≠a que conocerte'],
                correct: 1
            },
            {
                type: 'input',
                title: 'Color favorito',
                description: '¬øCu√°l es tu color favorito?',
                answer: 'azul'
            },
            {
                type: 'message',
                title: 'Eres √∫nica',
                message: 'No existe nadie como t√∫. Tu forma de ver el mundo me hace amarlo a√∫n m√°s. üåü'
            },
            {
                type: 'multiple',
                title: '¬øCu√°ntos meses llevamos juntos?',
                description: 'Cada d√≠a cuenta',
                options: ['6 meses', '9 meses', '12 meses', '15 meses'],
                correct: 2
            },
            
            // 21: Mini-game - Reaction Time
            {
                type: 'reaction',
                title: '¬°Juego de reflejos!',
                description: 'Toca el coraz√≥n cuando aparezca ‚ù§Ô∏è',
                timeout: 3000
            },
            
            // 22-25: M√°s preguntas
            {
                type: 'multiple',
                title: '¬øQu√© te hace re√≠r siempre?',
                description: 'Mi arma secreta',
                options: ['Mis chistes malos', 'Mis caras graciosas', 'Las cosquillas', 'Todo lo anterior'],
                correct: 3
            },
            {
                type: 'input',
                title: 'Nuestro sue√±o',
                description: 'Un lugar que queremos visitar juntos',
                answer: 'paris'
            },
            {
                type: 'message',
                title: 'Contigo todo es mejor',
                message: 'Hasta las cosas m√°s simples se vuelven aventuras incre√≠bles cuando est√°s conmigo. üåà'
            },
            {
                type: 'multiple',
                title: '¬øQu√© es lo que m√°s valoras de nuestra relaci√≥n?',
                description: 'Lo que nos hace especiales',
                options: ['La confianza', 'La risa', 'La complicidad', 'Todo'],
                correct: 3
            },
            
            // 26: Mini-game - Puzzle
            {
                type: 'puzzle',
                title: '¬°Ordena los n√∫meros!',
                description: 'Del 1 al 9 en orden',
                numbers: [5, 2, 8, 1, 9, 3, 7, 4, 6]
            },
            
            // 27-30: √öltimas preguntas
            {
                type: 'multiple',
                title: '¬øQu√© har√≠amos en una cita perfecta?',
                description: 'Nuestro plan ideal',
                options: ['Cena rom√°ntica', 'Aventura al aire libre', 'Noche de pel√≠culas', 'Todo con tal de estar juntos'],
                correct: 3
            },
            {
                type: 'input',
                title: 'Palabra clave',
                description: 'Una palabra que nos define',
                answer: 'amor'
            },
            {
                type: 'message',
                title: 'Mi promesa',
                message: 'Prometo estar siempre para ti, en las buenas y en las dif√≠ciles. Juntos podemos con todo. üíë'
            },
            {
                type: 'multiple',
                title: '¬øQu√© es lo primero que notaste de m√≠?',
                description: 'Aquella primera vez',
                options: ['Tu sonrisa', 'Tus ojos', 'Tu forma de hablar', 'Tu energ√≠a'],
                correct: 1
            },
            
            // 31: Mini-game - Speed Memory
            {
                type: 'memory',
                title: '¬°√öltima prueba de memoria!',
                description: 'M√°s r√°pido esta vez',
                pairs: ['üåπ', 'üíê', 'üå∫', 'üå∏']
            },
            
            // 32: Pen√∫ltima pregunta
            {
                type: 'multiple',
                title: '¬øQu√© significa el n√∫mero 33 para nosotros?',
                description: 'Nuestro n√∫mero m√°gico',
                options: ['Nuestro n√∫mero de la suerte', 'Un c√≥digo secreto', 'Representa nuestro amor infinito', 'Todas las anteriores'],
                correct: 3
            },
            
            // 33: Final
            {
                type: 'final',
                title: '¬°Lo lograste! üéâ',
                message: 'Has completado las 33 pruebas. Cada una representa una raz√≥n por la que te amo. Eres mi persona favorita en todo el mundo y no imagino mi vida sin ti. Este es solo el comienzo de muchas m√°s aventuras juntos. Te amo hasta el infinito y m√°s all√°. ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è'
            }
        ];

        let currentChallenge = 0;
        let memoryFlipped = [];
        let memoryMatched = [];
        let memoryCards = [];
        let heartsFound = 0;
        let puzzleOrder = [];
        let reactionStartTime = 0;

        function updateProgress() {
            const progress = ((currentChallenge + 1) / 33 * 100).toFixed(0);
            document.getElementById('currentLevel').textContent = currentChallenge + 1;
            document.getElementById('progressPercent').textContent = progress + '%';
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function renderChallenge() {
            const challenge = challenges[currentChallenge];
            const card = document.getElementById('challengeCard');
            card.style.animation = 'none';
            setTimeout(() => card.style.animation = 'slideUp 0.6s ease', 10);

            let html = `<span class="challenge-number">Desaf√≠o ${currentChallenge + 1}/33</span>`;

            switch(challenge.type) {
                case 'multiple':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="options">
                            ${challenge.options.map((opt, i) => 
                                `<button class="option-btn" onclick="checkMultiple(${i})">${opt}</button>`
                            ).join('')}
                        </div>
                    `;
                    break;

                case 'input':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <input type="text" class="input-field" id="answerInput" placeholder="Escribe aqu√≠...">
                        <button class="submit-btn" onclick="checkInput()">Enviar Respuesta</button>
                    `;
                    break;

                case 'message':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <div class="message-card">${challenge.message}</div>
                        <button class="submit-btn" onclick="nextChallenge()">Continuar ‚ù§Ô∏è</button>
                    `;
                    break;

                case 'memory':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="memory-grid" id="memoryGrid"></div>
                    `;
                    setTimeout(() => initMemoryGame(challenge.pairs), 100);
                    break;

                case 'find-hearts':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="reaction-time">Corazones encontrados: <span id="heartsCounter">0/${challenge.heartsToFind}</span></div>
                        <div class="hearts-container" id="heartsContainer"></div>
                    `;
                    setTimeout(() => initFindHearts(challenge.heartsToFind), 100);
                    break;

                case 'slider':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="slider-container">
                            <input type="range" min="0" max="100" value="50" class="slider" id="loveSlider">
                            <div class="slider-value"><span id="sliderValue">50</span>%</div>
                        </div>
                        <button class="submit-btn" onclick="checkSlider(${challenge.target})">Confirmar</button>
                    `;
                    setTimeout(() => {
                        const slider = document.getElementById('loveSlider');
                        slider.oninput = function() {
                            document.getElementById('sliderValue').textContent = this.value;
                        }
                    }, 100);
                    break;

                case 'reaction':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="reaction-time" id="reactionArea">
                            <div style="font-size: 3em; padding: 60px 0;">üëÄ</div>
                            <p>Espera el coraz√≥n...</p>
                        </div>
                    `;
                    setTimeout(() => initReactionGame(challenge.timeout), 100);
                    break;

                case 'puzzle':
                    html += `
                        <h2 class="challenge-title">${challenge.title}</h2>
                        <p class="challenge-description">${challenge.description}</p>
                        <div class="puzzle-pieces" id="puzzleGrid"></div>
                        <button class="submit-btn" onclick="checkPuzzle()">Verificar Orden</button>
                    `;
                    setTimeout(() => initPuzzle(challenge.numbers), 100);
                    break;

                case 'final':
                    html = `
                        <div class="final-screen">
                            <div class="celebration">üéâüíùüéä</div>
                            <h2>${challenge.title}</h2>
                            <div class="final-message">${challenge.message}</div>
                            <div class="celebration">‚ù§Ô∏èüíïüíñ</div>
                        </div>
                    `;
                    break;
            }

            card.innerHTML = html;
            updateProgress();
        }

        function checkMultiple(selected) {
            const challenge = challenges[currentChallenge];
            const buttons = document.querySelectorAll('.option-btn');
            
            if (selected === challenge.correct) {
                buttons[selected].classList.add('correct');
                setTimeout(() => nextChallenge(), 1000);
            } else {
                buttons[selected].classList.add('incorrect');
                setTimeout(() => buttons[selected].classList.remove('incorrect'), 500);
            }
        }

        function checkInput() {
            const input = document.getElementById('answerInput').value.toLowerCase().trim();
            const challenge = challenges[currentChallenge];
            
            if (input.includes(challenge.answer.toLowerCase()) || input === challenge.answer.toLowerCase()) {
                document.getElementById('answerInput').style.borderColor = '#4CAF50';
                document.getElementById('answerInput').style.background = 'linear-gradient(135deg, #A8E6CF, #E8F5E9)';
                setTimeout(() => nextChallenge(), 1000);
            } else {
                document.getElementById('answerInput').style.borderColor = '#F44336';
                document.getElementById('answerInput').style.animation = 'shake 0.5s ease';
                setTimeout(() => {
                    document.getElementById('answerInput').style.borderColor = '#9DE5DD';
                    document.getElementById('answerInput').style.animation = 'none';
                }, 500);
            }
        }

        function initMemoryGame(pairs) {
            memoryFlipped = [];
            memoryMatched = [];
            const allSymbols = [...pairs, ...pairs];
            memoryCards = allSymbols.sort(() => Math.random() - 0.5);
            
            const grid = document.getElementById('memoryGrid');
            grid.innerHTML = memoryCards.map((symbol, i) => 
                `<div class="memory-card" onclick="flipCard(${i})" data-symbol="${symbol}" data-index="${i}">
                    <span style="display: none;">${symbol}</span>
                </div>`
            ).join('');
        }

        function flipCard(index) {
            if (memoryFlipped.length >= 2 || memoryMatched.includes(index) || memoryFlipped.includes(index)) return;
            
            const cards = document.querySelectorAll('.memory-card');
            const card = cards[index];
            card.classList.add('flipped');
            card.querySelector('span').style.display = 'block';
            memoryFlipped.push(index);

            if (memoryFlipped.length === 2) {
                const [first, second] = memoryFlipped;
                const firstSymbol = cards[first].dataset.symbol;
                const secondSymbol = cards[second].dataset.symbol;

                if (firstSymbol === secondSymbol) {
                    setTimeout(() => {
                        cards[first].classList.add('matched');
                        cards[second].classList.add('matched');
                        memoryMatched.push(first, second);
                        memoryFlipped = [];

                        if (memoryMatched.length === memoryCards.length) {
                            setTimeout(() => nextChallenge(), 1000);
                        }
                    }, 500);
                } else {
                    setTimeout(() => {
                        cards[first].classList.remove('flipped');
                        cards[second].classList.remove('flipped');
                        cards[first].querySelector('span').style.display = 'none';
                        cards[second].querySelector('span').style.display = 'none';
                        memoryFlipped = [];
                    }, 1000);
                }
            }
        }

        function initFindHearts(target) {
            heartsFound = 0;
            const container = document.getElementById('heartsContainer');
            const hearts = ['üíô', 'üíö', 'üíõ', 'üíú', '‚ù§Ô∏è', 'üß°', 'üíù', 'üíñ'];
            const redHeartPositions = [];
            
            while (redHeartPositions.length < target) {
                const pos = Math.floor(Math.random() * 8);
                if (!redHeartPositions.includes(pos)) {
                    redHeartPositions.push(pos);
                }
            }

            container.innerHTML = hearts.map((heart, i) => {
                const isRed = redHeartPositions.includes(i);
                return `<div class="heart-item" onclick="clickHeart(this, ${isRed}, ${target})">${isRed ? '‚ù§Ô∏è' : heart}</div>`;
            }).join('');
        }

        function clickHeart(element, isCorrect, target) {
            if (element.classList.contains('found')) return;
            
            if (isCorrect) {
                element.classList.add('found');
                heartsFound++;
                document.getElementById('heartsCounter').textContent = `${heartsFound}/${target}`;
                
                if (heartsFound === target) {
                    setTimeout(() => nextChallenge(), 1000);
                }
            }
        }

        function checkSlider(target) {
            const value = parseInt(document.getElementById('loveSlider').value);
            if (value === target) {
                nextChallenge();
            } else if (value >= target - 10) {
                alert('¬°Casi! Un poquito m√°s... üíï');
            } else {
                alert('¬°M√°s amor! ‚ù§Ô∏è');
            }
        }

        function initReactionGame(timeout) {
            const area = document.getElementById('reactionArea');
            const delay = Math.random() * 2000 + 1000;
            
            setTimeout(() => {
                reactionStartTime = Date.now();
                area.innerHTML = `
                    <div style="font-size: 5em; padding: 40px 0; cursor: pointer;" onclick="reactionClick()">‚ù§Ô∏è</div>
                    <p>¬°TOCA AHORA!</p>
                `;
            }, delay);
        }

        function reactionClick() {
            const reactionTime = Date.now() - reactionStartTime;
            const area = document.getElementById('reactionArea');
            area.innerHTML = `
                <div style="font-size: 3em; padding: 30px 0;">üéØ</div>
                <p>¬°Tu tiempo: ${reactionTime}ms!</p>
                <p style="margin-top: 15px;">¬°Reflejos incre√≠bles! ‚ö°</p>
            `;
            setTimeout(() => nextChallenge(), 2000);
        }

        function initPuzzle(numbers) {
            puzzleOrder = [...numbers];
            const grid = document.getElementById('puzzleGrid');
            grid.innerHTML = puzzleOrder.map((num, i) => 
                `<div class="puzzle-piece" onclick="swapPuzzle(${i})" data-index="${i}">${num}</div>`
            ).join('');
        }

        let selectedPuzzlePiece = null;

        function swapPuzzle(index) {
            if (selectedPuzzlePiece === null) {
                selectedPuzzlePiece = index;
                document.querySelectorAll('.puzzle-piece')[index].style.border = '3px solid ' + getComputedStyle(document.documentElement).getPropertyValue('--accent');
            } else {
                [puzzleOrder[selectedPuzzlePiece], puzzleOrder[index]] = [puzzleOrder[index], puzzleOrder[selectedPuzzlePiece]];
                initPuzzle(puzzleOrder);
                selectedPuzzlePiece = null;
            }
        }

        function checkPuzzle() {
            const isCorrect = puzzleOrder.every((num, i) => num === i + 1);
            if (isCorrect) {
                document.querySelectorAll('.puzzle-piece').forEach(piece => {
                    piece.classList.add('correct-position');
                });
                setTimeout(() => nextChallenge(), 1000);
            } else {
                alert('¬°Casi! Sigue intent√°ndolo üß©');
            }
        }

        function nextChallenge() {
            currentChallenge++;
            if (currentChallenge < challenges.length) {
                renderChallenge();
            }
        }

        // Initialize
        renderChallenge();
    </script>
</body>
</html>